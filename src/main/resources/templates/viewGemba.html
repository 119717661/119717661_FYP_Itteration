<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link th:href="@{/style/main.css}" rel="stylesheet" />

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <title>Lean Web App</title>
  
</head>
<body>
 <!-- The navigation menu -->
 <div nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <a href="/employee">Employees & Schedule</a>
  <a href="/process">Processes & Tasks</a>
  <a href="/gemba">Gemba</a>
  <a href="/dashboard">Dashboard</a>
</div> 

  
<div class="container">
  <h1>Gemba Data</h1>

  <label for="gembaList">Select Gemba List:</label>
<select id="gembaList" name="gembaList" class="form-control form-control-lg">
    <option value="" disabled selected>Please select a Gemba List</option>
    <option th:each="gembaList : ${gembaLists}" th:value="${gembaList.gembaListid}" th:text="${gembaList.listNumber}"></option>
</select>


<div class="table-responsive">
  <table id="gembaTable" class="table table-bordered">
    <thead class="thead-light">
        <tr>
            <th>List ID</th>
            <th>Task ID</th>
            <th>Task Name</th>
            <th>Process Name</th>
            <th>Time of Task</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
      <tr th:each="gemba : ${gemba}">
          <td class="text-center list-id" th:text="${gemba.gembaList.gembaListid}"></td>
          <td th:text="${gemba.taskID}"></td>
          <td th:text="${gemba.taskname}"></td>
          <td th:text="${gemba.processName}"></td>
          <td th:text="${gemba.timeOfTask}"></td>
          <td th:text="${gemba.date}"></td>
      </tr>
  </tbody>
  
</table>

</div>

</div>

<script type="text/javascript">
const select = document.querySelector('#gembaList');
const table = document.querySelector('#gembaTable');

select.addEventListener('change', () => {
    table.style.display = '';

    const selectedListId = select.options[select.selectedIndex].value;

    for (const row of table.rows) {
        const listIdCell = row.querySelector('.list-id');
        if (listIdCell) {
            if (listIdCell.textContent === selectedListId) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        }
    }
});

</script>



<footer class="container-fluid bg-4 text-center sticky-bottom">
  <section class="py-1">
    <div class="container px-4 px-lg-5 mt-5 bg-dark">
      <div class="row gx-4 gx-lg-5 justify-content-lg-start">
        <div class="col mb-5">
            <div class="card bg-dark text-white border-0">
                <div class="text-lg-start">
                    <b>Contact Details:</b><br>
                    <div class="text-lg-start">
                      <p>Phone : 087xxxx60</p>
                      <p>E-mail : 119717661@umail.ucc.ie</p>
                  </div>
                </div>
                <hr>
            </div>
      </div>
      <div class="col mb-5 float-right ms-auto">
        <div class="card h-10 bg-dark text-white border-0"></div>
      </div>
      </div>
    </div>
  </section>
  <div class="container py-4 bg-light">
    <p class="m-0 text-center text-black">Made for University College Cork &copy; <br> Created by: Piotr Janus</p>
  </div>
</footer>

</body>
</html>
