<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link th:href="@{/style/main.css}" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <title>Lean Web App</title>

</head>
<body>
 <!-- The navigation menu -->
 <div nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <a class="active" href="/employee">Employees & Schedule</a>
  <a href="/process">Processes & Tasks</a>
  <a href="/gemba">Gemba</a>
  <a href="/dashboard">Dashboard</a>
</div> 

  
<div class="container-fluid text-center">    
  <div class="row content">
    <div class="col-sm-2 sidenav bg-gray-300">
      <div class="list-group mt-2">
        <a class="list-group-item list-group-item-action text-dark font-weight-bold" href="/addEmployee">Add New Employee</a>
        <a class="list-group-item list-group-item-action text-dark font-weight-bold" href="/showAllEmployees">Show All Employees</a>
        <a class="list-group-item list-group-item-action text-dark font-weight-bold" href="/schedule">Schedule Employees</a>
        <a class="active list-group-item list-group-item-action text-dark font-weight-bold" href="/view-schedule">View Schedule</a>
      </div>
    </div>
    
    <div class="col-sm-8 text-left"> 
     <h2> View Schedule Page. </h2>
        
<br><form id="week-form" class="form">
  <div class="form-group">
      <label for="weekNumber">Week Number</label>
      <select id="weekSelector" name="weekNumber" class="form-control form-control-lg" >
        <option value="" disabled selected>Please Select The Week</option>
        <option th:each="week : ${weeks}" th:value="${week.weekNumber}" th:text="${week.weekNumber}" style="text-align: center;"></option>
     </select>
  </div>
</form>
<div class="table-responsive">
  <table id="scheduleTable" class="table table-bordered" style="display: none;">
      <thead class="thead-light">
          <tr>
              <th>Day</th>
              <th>Employee</th>
              <th>Week</th>
          </tr>
      </thead>
      <tbody>
          <tr th:each="schedule : ${scheduleList}" style="display: none;">
              <td class="text-center" th:text="${schedule.day}"></td>
              <td th:text="${schedule.employee.efName} + ' ' + ${schedule.employee.elName}"></td>
              <td th:text="${schedule.week.weekNumber}" class="week-Name"></td>
          </tr>
      </tbody>
  </table>
</div>
<script type="text/javascript">
  // Selector 
  const select = document.querySelector('#weekSelector');
  const table = document.querySelector('#scheduleTable');

  select.addEventListener('change', () => {
    table.style.display = '';

    const selectedWeek = select.options[select.selectedIndex].textContent;
    
    for (const row of table.rows) {
      const weeksCell = row.querySelector('.week-Name');
      if (weeksCell) {
        if (weeksCell.textContent === selectedWeek) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      }
    }
  });
</script>

<hr>
    </div>
  </div>
  </div>
  <footer class="container-fluid bg-4 text-center">
    <section class="py-1">
      <div class="container px-4 px-lg-5 mt-5 bg-dark">
        <div class="row gx-4 gx-lg-5 justify-content-lg-start">
          <div class="col mb-5">
              <div class="card bg-dark text-white border-0">
                  <div class="text-lg-start">
                      <b>Contact Details:</b><br>
                      <div class="text-lg-start">
                        <p>Phone : 087xxxx60</p>
                        <p>E-mail : 119717661@umail.ucc.ie</p>
                    </div>
                  </div>
                  <hr>
              </div>
        </div>
        <div class="col mb-5 float-right ms-auto">
          <div class="card h-10 bg-dark text-white border-0"></div>
        </div>
        </div>
      </div>
    </section>
    <div class="container py-4 bg-light">
      <p class="m-0 text-center text-black">Made for University College Cork &copy; <br> Created by: Piotr Janus</p>
    </div>
  </footer>
  
  </body>
  </html>
  